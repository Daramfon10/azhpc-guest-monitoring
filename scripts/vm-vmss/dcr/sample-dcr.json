{
  "properties": {
    "description": "EUS DCR with Prom/MAC + CustomVMScrapeConfig",
    "dataSources": {
      "prometheusForwarder": [
        {
          "name": "myPromDataSource1",
          "streams": [
            "Microsoft-PrometheusMetrics"
          ],
          "customVMScrapeConfig": {
            "global": {
              "scrape_interval": "15s",
              "evaluation_interval": "15s"
            },
            "scrape_configs": [
              {
                "job_name": "Microsoft-node_exporter",
                "static_configs": [
                  {
                    "targets": [
                      "localhost:9100"
                    ]
                  }
                ],
                "metric_relabel_configs": [
                    {
                        "target_label": "vm_instance",
                        "replacement": "${env:HOSTNAME:-missedIt}"
                    }
                ]
              },
              {
                "job_name": "Microsoft-gpu_exporter",
                "static_configs": [
                  {
                    "targets": [
                      "localhost:9400"
                    ]
                  }
                ],
                "metric_relabel_configs": [
                    {
                        "target_label": "vm_instance",
                        "replacement": "${env:HOSTNAME:-missedIt}"
                    }
                ]
              }
            ]
          }
        }
      ]
    },
    "destinations": {
      "monitoringAccounts": [
        {
          "accountResourceId": "<YOUR-AZURE-MONITOR-WORKSPACE-ARM-ID>",
          "name": "myMonAccountDest"
        }
      ]
    },
    "dataFlows": [
      {
        "streams": [
          "Microsoft-PrometheusMetrics"
        ],
        "destinations": [
          "myMonAccountDest"
        ]
      }
    ]
  },
  "location": "<WORKSPACE-REGION>"
}